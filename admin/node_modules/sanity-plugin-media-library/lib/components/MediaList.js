"use strict";
var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.MediaList = void 0;
var DraggableMediaItem_1 = require("./DraggableMediaItem");
var utils_1 = require("../shared/utils");
var react_1 = __importDefault(require("react"));
var styled_components_1 = __importDefault(require("styled-components"));
var ui_1 = require("@sanity/ui");
var icons_1 = require("@sanity/icons");
var StyledThumbnailContainer = styled_components_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  height: 100px;\n  margin: 0 20px 0 0;\n  overflow: hidden;\n  position: relative;\n  width: 100px;\n  border-radius: 5px;\n  border: 1px solid whitesmoke;\n  padding: 2px;\n  background: white;\n"], ["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-shrink: 0;\n  height: 100px;\n  margin: 0 20px 0 0;\n  overflow: hidden;\n  position: relative;\n  width: 100px;\n  border-radius: 5px;\n  border: 1px solid whitesmoke;\n  padding: 2px;\n  background: white;\n"])));
var StyledFile = styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  line-height: 1.2;\n  padding: 20px;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  background: white;\n"], ["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  line-height: 1.2;\n  padding: 20px;\n  position: absolute;\n  top: 0;\n  width: 100%;\n  background: white;\n"])));
var StyledTable = styled_components_1.default.table(templateObject_3 || (templateObject_3 = __makeTemplateObject(["\n  width: 100%;\n  border-collapse: collapse;\n  border: 0;\n\n  tbody tr:nth-of-type(odd) {\n    background-color: rgba(0, 0, 0, 0.01);\n  }\n\n  td:nth-of-type(2) {\n    width: 120px;\n    padding: 4px 10px;\n  }\n"], ["\n  width: 100%;\n  border-collapse: collapse;\n  border: 0;\n\n  tbody tr:nth-of-type(odd) {\n    background-color: rgba(0, 0, 0, 0.01);\n  }\n\n  td:nth-of-type(2) {\n    width: 120px;\n    padding: 4px 10px;\n  }\n"])));
var StyledTh = styled_components_1.default.th(templateObject_4 || (templateObject_4 = __makeTemplateObject(["\n  text-align: left;\n  padding: 10px 0;\n"], ["\n  text-align: left;\n  padding: 10px 0;\n"])));
var MediaList = function (_a) {
    var _b = _a.assets, assets = _b === void 0 ? [] : _b, onDoubleClick = _a.onDoubleClick, onDragStart = _a.onDragStart, onMediaItemClick = _a.onMediaItemClick, selectedAssets = _a.selectedAssets, setIsDraggingMediaItem = _a.setIsDraggingMediaItem;
    return (react_1.default.createElement(ui_1.Box, { padding: 3 },
        react_1.default.createElement(StyledTable, null,
            react_1.default.createElement("thead", null,
                react_1.default.createElement("tr", null, ['', '', 'Title', 'Alt', 'Tags', 'Dimensions', 'Type', 'Size', 'Created at'].map(function (label) { return (react_1.default.createElement(StyledTh, { key: label },
                    react_1.default.createElement(ui_1.Label, null, label))); }))),
            react_1.default.createElement("tbody", null, assets.map(function (asset) {
                var _createdAt = asset._createdAt, _type = asset._type, alt = asset.alt, _id = asset._id, extension = asset.extension, metadata = asset.metadata, originalFilename = asset.originalFilename, size = asset.size, _a = asset.tags, tags = _a === void 0 ? [] : _a, title = asset.title, url = asset.url;
                return (react_1.default.createElement("tr", { key: _id, onClick: function (e) { return onMediaItemClick(e, asset); }, onDoubleClick: function () { return onDoubleClick(asset); } },
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Checkbox, { onClick: function (e) {
                                e.stopPropagation();
                                onMediaItemClick(e, asset);
                            }, checked: selectedAssets.findIndex(function (selectedAsset) { return _id === selectedAsset._id; }) > -1 })),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(DraggableMediaItem_1.DraggableMediaItem, { _type: _type, onDragEnd: function () { return setIsDraggingMediaItem(false); }, onDragStart: function () {
                                onDragStart(asset);
                                setIsDraggingMediaItem(true);
                            }, selectedAmount: selectedAssets.length, url: url },
                            react_1.default.createElement(StyledThumbnailContainer, null, _type === 'sanity.imageAsset' ? (react_1.default.createElement("img", { alt: alt, src: url + "?w=100&h=100&fit=crop&auto=format&q=80", loading: "lazy" })) : (react_1.default.createElement(StyledFile, null,
                                react_1.default.createElement(icons_1.DocumentIcon, { style: { width: 24, height: 24 } })))))),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1 }, title || originalFilename)),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1 }, alt)),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1, muted: true }, tags === null || tags === void 0 ? void 0 : tags.join(', '))),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1 }, (metadata === null || metadata === void 0 ? void 0 : metadata.dimensions) && (metadata === null || metadata === void 0 ? void 0 : metadata.dimensions.width) + " x " + (metadata === null || metadata === void 0 ? void 0 : metadata.dimensions.height))),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1 }, extension.toUpperCase())),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1 }, (0, utils_1.formatSize)(size))),
                    react_1.default.createElement("td", null,
                        react_1.default.createElement(ui_1.Text, { size: 1 }, (0, utils_1.formatDate)(_createdAt)))));
            })))));
};
exports.MediaList = MediaList;
var templateObject_1, templateObject_2, templateObject_3, templateObject_4;
