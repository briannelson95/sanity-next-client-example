{"version":3,"file":"_internal.js","sources":["../../src/sanity/validation/createValidationResult.ts","../../src/sanity/groupProblems.ts","../../src/sanity/validation/utils/getDupes.ts","../../src/core/traverseSchema.ts","../../src/sanity/coreTypes.ts","../../src/sanity/traverseSchema.ts","../../src/sanity/validation/utils/isInputComponentLike.ts","../../src/sanity/validation/utils/validateInputComponent.ts","../../src/sanity/validation/types/object.ts","../../src/sanity/validation/types/document.ts","../../src/sanity/validation/types/reference.ts","../../src/sanity/validation/types/array.ts","../../src/sanity/validation/types/slug.ts","../../src/sanity/validation/types/file.ts","../../src/sanity/validation/types/image.ts","../../src/sanity/validation/utils/isJSONTypeOf.ts","../../src/sanity/validation/types/block.ts","../../src/sanity/validation/utils/validateNonObjectFieldsProp.ts","../../src/sanity/validation/utils/validateTypeName.ts","../../src/sanity/validation/types/common.ts","../../src/sanity/validation/types/rootType.ts","../../src/sanity/validation/utils/validateExperimentalSearch.ts","../../src/sanity/validation/types/crossDatasetReference.ts","../../src/sanity/validateSchema.ts","../../src/legacy/actionUtils.ts"],"sourcesContent":["import type {SchemaValidationResult} from '../typedefs'\n\n// Temporary solution to ensure we have a central registry over used helpIds\nexport const HELP_IDS = {\n  TYPE_INVALID: 'schema-type-invalid',\n  TYPE_IS_ESM_MODULE: 'schema-type-is-esm-module',\n  TYPE_NAME_RESERVED: 'schema-type-name-reserved',\n  TYPE_MISSING_NAME: 'schema-type-missing-name-or-type',\n  TYPE_MISSING_TYPE: 'schema-type-missing-name-or-type',\n  TYPE_TITLE_RECOMMENDED: 'schema-type-title-is-recommended',\n  TYPE_TITLE_INVALID: 'schema-type-title-is-recommended',\n  OBJECT_FIELDS_INVALID: 'schema-object-fields-invalid',\n  OBJECT_FIELD_NOT_UNIQUE: 'schema-object-fields-invalid',\n  OBJECT_FIELD_NAME_INVALID: 'schema-object-fields-invalid',\n  OBJECT_FIELD_DEFINITION_INVALID_TYPE: 'schema-object-fields-invalid',\n  ARRAY_OF_ARRAY: 'schema-array-of-array',\n  ARRAY_OF_INVALID: 'schema-array-of-invalid',\n  ARRAY_OF_NOT_UNIQUE: 'schema-array-of-invalid',\n  ARRAY_OF_TYPE_GLOBAL_TYPE_CONFLICT: 'schema-array-of-type-global-type-conflict',\n  ARRAY_OF_TYPE_BUILTIN_TYPE_CONFLICT: 'schema-array-of-type-builtin-type-conflict',\n  REFERENCE_TO_INVALID: 'schema-reference-to-invalid',\n  REFERENCE_TO_NOT_UNIQUE: 'schema-reference-to-invalid',\n  REFERENCE_INVALID_OPTIONS: 'schema-reference-invalid-options',\n  REFERENCE_INVALID_OPTIONS_LOCATION: 'schema-reference-options-nesting',\n  REFERENCE_INVALID_FILTER_PARAMS_COMBINATION: 'schema-reference-filter-params-combination',\n  SLUG_SLUGIFY_FN_RENAMED: 'slug-slugifyfn-renamed',\n  ASSET_METADATA_FIELD_INVALID: 'asset-metadata-field-invalid',\n  CROSS_DATASET_REFERENCE_INVALID: 'cross-dataset-reference-invalid',\n}\n\nfunction createValidationResult(\n  severity: SchemaValidationResult['severity'],\n  message: string,\n  helpId: string | null\n): SchemaValidationResult {\n  if (helpId && !Object.keys(HELP_IDS).some((id) => HELP_IDS[id] === helpId)) {\n    throw new Error(\n      `Used the unknown helpId \"${helpId}\", please add it to the array in createValidationResult.js`\n    )\n  }\n  return {\n    severity,\n    message,\n    helpId,\n  }\n}\n\nexport const error = (message: string, helpId?: string | null): SchemaValidationResult =>\n  createValidationResult('error', message, helpId)\n\nexport const warning = (message: string, helpId?: string | null): SchemaValidationResult =>\n  createValidationResult('warning', message, helpId)\n\nexport const info = (message: string, helpId?: string | null): SchemaValidationResult =>\n  createValidationResult('info', message, helpId)\n","import type {SchemaType, SchemaTypeDefinition} from '@sanity/types'\nimport {flatten, get} from 'lodash'\nimport {error} from './validation/createValidationResult'\nimport type {ProblemPath, ProblemPathPropertySegment, TypeWithProblems} from './typedefs'\n\n/**\n * @internal\n */\nexport function groupProblems(types: SchemaTypeDefinition[]): TypeWithProblems[] {\n  return flatten<TypeWithProblems>(types.map((type) => getTypeProblems(type))).filter(\n    (type) => type.problems.length > 0\n  )\n}\n\nfunction createTypeWithMembersProblemsAccessor(\n  memberPropertyName: string,\n  getMembers = (type: SchemaType) => get(type, memberPropertyName)\n) {\n  return function getProblems(type, parentPath: ProblemPath): TypeWithProblems[] {\n    const currentPath: ProblemPath = [\n      ...parentPath,\n      {kind: 'type', type: type.type, name: type.name},\n    ]\n\n    const members = getMembers(type) || []\n\n    const memberProblems: TypeWithProblems[][] = Array.isArray(members)\n      ? members.map((memberType) => {\n          const propertySegment: ProblemPathPropertySegment = {\n            kind: 'property',\n            name: memberPropertyName,\n          }\n          const memberPath: ProblemPath = [...currentPath, propertySegment]\n          return getTypeProblems(memberType, memberPath)\n        })\n      : [\n          [\n            {\n              path: currentPath,\n              problems: [error(`Member declaration (${memberPropertyName}) is not an array`)],\n            },\n          ],\n        ]\n\n    return [\n      {\n        path: currentPath,\n        problems: type._problems || [],\n      },\n      ...flatten(memberProblems),\n    ]\n  }\n}\n\nconst arrify = (val) => (Array.isArray(val) ? val : (typeof val === 'undefined' && []) || [val])\n\nconst getObjectProblems = createTypeWithMembersProblemsAccessor('fields')\nconst getImageProblems = createTypeWithMembersProblemsAccessor('fields')\nconst getFileProblems = createTypeWithMembersProblemsAccessor('fields')\nconst getArrayProblems = createTypeWithMembersProblemsAccessor('of')\nconst getReferenceProblems = createTypeWithMembersProblemsAccessor('to', (type) =>\n  'to' in type ? arrify(type.to) : []\n)\nconst getBlockAnnotationProblems = createTypeWithMembersProblemsAccessor('marks.annotations')\nconst getBlockMemberProblems = createTypeWithMembersProblemsAccessor('of')\nconst getBlockProblems = (type, problems) => [\n  ...getBlockAnnotationProblems(type, problems),\n  ...getBlockMemberProblems(type, problems),\n]\n\nfunction getDefaultProblems(type, path = []): TypeWithProblems[] {\n  return [\n    {\n      path: [...path, {kind: 'type', type: type.type, name: type.name}],\n      problems: type._problems || [],\n    },\n  ]\n}\n\nfunction getTypeProblems(type: SchemaTypeDefinition, path = []): TypeWithProblems[] {\n  switch (type.type) {\n    case 'object': {\n      return getObjectProblems(type, path)\n    }\n    case 'document': {\n      return getObjectProblems(type, path)\n    }\n    case 'array': {\n      return getArrayProblems(type, path)\n    }\n    case 'reference': {\n      return getReferenceProblems(type, path)\n    }\n    case 'block': {\n      return getBlockProblems(type, path)\n    }\n    case 'image': {\n      return getImageProblems(type, path)\n    }\n    case 'file': {\n      return getFileProblems(type, path)\n    }\n    default: {\n      return getDefaultProblems(type, path)\n    }\n  }\n}\n","export function getDupes(array, selector = (v) => v) {\n  const dupes = array.reduce((acc, item) => {\n    const key = selector(item)\n    if (!acc[key]) {\n      acc[key] = []\n    }\n    acc[key].push(item)\n    return acc\n  }, {})\n\n  return Object.keys(dupes)\n    .map((key) => (dupes[key].length > 1 ? dupes[key] : null))\n    .filter(Boolean)\n}\n","import {flatten, uniq} from 'lodash'\nimport {getDupes} from '../sanity/validation/utils/getDupes'\n\ntype SchemaType = Record<string, any>\ntype SchemaTypeDef = Record<string, any>\n\ntype VisitContext = {\n  isRoot: boolean\n  isReserved: (typeName: string) => boolean\n  visit: Visitor\n  index: number\n  isDuplicate: (typeName: string) => boolean\n  getType: (typeName: string) => null | SchemaType\n  getTypeNames: () => Array<string>\n}\n\nexport type Visitor = (typeDef: SchemaTypeDef, arg1: VisitContext) => SchemaType\n\nconst NOOP_VISITOR: Visitor = (typeDef) => typeDef\n\nexport class UnknownType {\n  name: string\n\n  constructor(name: string) {\n    this.name = name\n  }\n}\n\nconst TYPE_TYPE = {name: 'type', type: null}\n\nconst FUTURE_RESERVED = ['any', 'time', 'date']\n\nexport function traverseSchema(\n  types: SchemaTypeDef[] = [],\n  coreTypes: SchemaTypeDef[] = [],\n  visitor: Visitor = NOOP_VISITOR\n) {\n  const coreTypesRegistry = Object.create(null)\n  const registry = Object.create(null)\n\n  const coreTypeNames = coreTypes.map((typeDef) => typeDef.name)\n\n  const reservedTypeNames = FUTURE_RESERVED.concat(coreTypeNames)\n\n  const typeNames = types.map((typeDef) => typeDef && typeDef.name).filter(Boolean)\n\n  coreTypes.forEach((coreType) => {\n    coreTypesRegistry[coreType.name] = coreType\n  })\n\n  types.forEach((type, i) => {\n    // Allocate a placeholder for each type\n    registry[(type && type.name) || `__unnamed_${i}`] = {}\n  })\n\n  function getType(typeName) {\n    return typeName === 'type'\n      ? TYPE_TYPE\n      : coreTypesRegistry[typeName] || registry[typeName] || null\n  }\n\n  const duplicateNames = uniq(flatten(getDupes(typeNames)))\n\n  function isDuplicate(typeName) {\n    return duplicateNames.includes(typeName)\n  }\n  function getTypeNames() {\n    return typeNames.concat(coreTypeNames)\n  }\n  function isReserved(typeName) {\n    return typeName === 'type' || reservedTypeNames.includes(typeName)\n  }\n\n  const visitType = (isRoot) => (typeDef, index) => {\n    return visitor(typeDef, {\n      visit: visitType(false),\n      isRoot,\n      getType,\n      getTypeNames,\n      isReserved,\n      isDuplicate,\n      index,\n    })\n  }\n\n  coreTypes.forEach((coreTypeDef) => {\n    Object.assign(coreTypesRegistry[coreTypeDef.name], visitType(coreTypeDef))\n  })\n\n  types.forEach((typeDef, i) => {\n    Object.assign(\n      registry[(typeDef && typeDef.name) || `__unnamed_${i}`],\n      visitType(true)(typeDef, i)\n    )\n  })\n\n  return {\n    get(typeName: string) {\n      const res = registry[typeName] || coreTypesRegistry[typeName]\n      if (res) {\n        return res\n      }\n      throw new Error(`No such type: ${typeName}`)\n    },\n    has(typeName: string): boolean {\n      return typeName in registry || typeName in coreTypesRegistry\n    },\n    getTypeNames(): string[] {\n      return Object.keys(registry)\n    },\n    getTypes() {\n      return this.getTypeNames().map(this.get)\n    },\n    toJSON() {\n      return this.getTypes()\n    },\n  }\n}\n","const coreTypes = [\n  {name: 'array', jsonType: 'array', type: 'type'},\n  {name: 'block', jsonType: 'object', type: 'type'},\n  {name: 'boolean', jsonType: 'boolean', type: 'type'},\n  {name: 'datetime', jsonType: 'string', type: 'type'},\n  {name: 'date', jsonType: 'string', type: 'type'},\n  {name: 'document', jsonType: 'object', type: 'type'},\n  {name: 'email', jsonType: 'string', type: 'type'},\n  {name: 'file', jsonType: 'object', type: 'type'},\n  {name: 'geopoint', jsonType: 'object', type: 'type'},\n  {name: 'image', jsonType: 'object', type: 'type'},\n  {name: 'number', jsonType: 'number', type: 'type'},\n  {name: 'object', jsonType: 'object', type: 'type'},\n  {name: 'reference', jsonType: 'object', type: 'type'},\n  {name: 'crossDatasetReference', jsonType: 'object', type: 'type'},\n  {name: 'slug', jsonType: 'object', type: 'type'},\n  {name: 'string', jsonType: 'string', type: 'type'},\n  {name: 'telephone', jsonType: 'string', type: 'type'},\n  {name: 'text', jsonType: 'string', type: 'type'},\n  {name: 'url', jsonType: 'string', type: 'type'},\n] as const\n\nexport const coreTypeNames = coreTypes.map((t) => t.name)\nexport default coreTypes\n","import {traverseSchema, type Visitor} from '../core/traverseSchema'\nimport type {_FIXME_} from './typedefs'\nimport coreTypes from './coreTypes'\n\nexport function traverseSanitySchema(schemaTypes: _FIXME_[], visitor: Visitor) {\n  return traverseSchema(schemaTypes, coreTypes as _FIXME_, visitor)\n}\n","const REACT_SYM_RE = /^Symbol\\(react\\..+\\)$/\n\nexport function isInputComponentLike(value: any) {\n  const type = typeof value\n  // Note: we're not using `isValidElementType` from react-is here since it accepts too much, e.g. any strings.\n  return (\n    type === 'function' ||\n    (typeof value?.$$typeof === 'symbol' && REACT_SYM_RE.test(String(value?.$$typeof)))\n  )\n}\n","import {warning} from '../createValidationResult'\nimport inspect from '../../inspect'\nimport {isInputComponentLike} from './isInputComponentLike'\n\nexport function validateInputComponent(typeDef: any) {\n  if ('components' in typeDef && !isInputComponentLike(typeDef.components.input)) {\n    return [\n      warning(\n        `The \\`components.input\\` property is set but does not appear to be a valid React component (expected a function, but saw ${inspect(\n          typeDef.components.input\n        )}). If you have imported a custom input component, please verify that you have imported the correct named/default export.`\n      ),\n    ]\n  }\n\n  return []\n}\n","import {isPlainObject} from 'lodash'\nimport {error, HELP_IDS, warning} from '../createValidationResult'\nimport inspect from '../../inspect'\nimport {validateInputComponent} from '../utils/validateInputComponent'\n\nconst VALID_FIELD_RE = /^[A-Za-z]+[0-9A-Za-z_]*$/\nconst CONVENTIONAL_FIELD_RE = /^[A-Za-z_]+[0-9A-Za-z_]*$/\ninterface Field {\n  name: string\n}\n\ninterface PreviewConfig {\n  select?: {\n    [key: string]: string\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-types\n  prepare?: Function\n}\n\nfunction validateFieldName(name): Array<any> {\n  if (typeof name !== 'string') {\n    return [\n      error(\n        `Field names must be strings. Saw \"${inspect(name)}\"`,\n        HELP_IDS.OBJECT_FIELD_NAME_INVALID\n      ),\n    ]\n  }\n  if (name.startsWith('_')) {\n    return [\n      error(\n        `Invalid field name \"${name}\". Field names cannot start with underscores \"_\" as it's reserved for system fields.`,\n        HELP_IDS.OBJECT_FIELD_NAME_INVALID\n      ),\n    ]\n  }\n\n  if (!VALID_FIELD_RE.test(name)) {\n    return [\n      error(\n        `Invalid field name: \"${name}\". Fields can only contain characters from A-Z, numbers and underscores and should not start with a number (must pass the regular expression ${String(\n          VALID_FIELD_RE\n        )}).`,\n        HELP_IDS.OBJECT_FIELD_NAME_INVALID\n      ),\n    ]\n  }\n  if (!CONVENTIONAL_FIELD_RE.test(name)) {\n    return [\n      warning(\n        'Thats an interesting field name for sure! But it is... how to put it... a bit... unconventional?' +\n          ' It may be wise to keep special characters out of field names for easier access later on.'\n      ),\n      HELP_IDS.OBJECT_FIELD_NAME_INVALID,\n    ]\n  }\n  return []\n}\n\nexport function validateField(field, _visitorContext) {\n  if (!isPlainObject(field)) {\n    return [\n      error(\n        `Incorrect type for field definition - should be an object, saw ${inspect(field)}`,\n        HELP_IDS.OBJECT_FIELD_DEFINITION_INVALID_TYPE\n      ),\n    ]\n  }\n\n  const problems = []\n  problems.push(\n    ...('name' in field\n      ? validateFieldName(field.name)\n      : [error('Missing field name', HELP_IDS.OBJECT_FIELD_NAME_INVALID)])\n  )\n  problems.push(...validateInputComponent(field))\n  return problems\n}\n\nfunction getDuplicateFields(array: Array<Field>): Array<Array<Field>> {\n  const dupes: {[name: string]: Array<Field>} = {}\n  array.forEach((field) => {\n    if (!dupes[field.name]) {\n      dupes[field.name] = []\n    }\n    dupes[field.name].push(field)\n  })\n  return Object.keys(dupes)\n    .map((fieldName) => (dupes[fieldName].length > 1 ? dupes[fieldName] : null))\n    .filter(Boolean)\n}\n\nexport function validateFields(fields: any, options = {allowEmpty: false}) {\n  const problems = []\n  const fieldsIsArray = Array.isArray(fields)\n  if (!fieldsIsArray) {\n    return [\n      error(\n        `The \"fields\" property must be an array of fields. Instead saw \"${typeof fields}\"`,\n        HELP_IDS.OBJECT_FIELDS_INVALID\n      ),\n    ]\n  }\n\n  const fieldsWithNames = fields.filter((field) => typeof field.name === 'string')\n\n  getDuplicateFields(fieldsWithNames).forEach((dupes) => {\n    problems.push(\n      error(\n        `Found ${dupes.length} fields with name \"${dupes[0].name}\" in object`,\n        HELP_IDS.OBJECT_FIELD_NOT_UNIQUE\n      )\n    )\n  })\n\n  if (fields.length === 0 && !options.allowEmpty) {\n    problems.push(error('Object should have at least one field', HELP_IDS.OBJECT_FIELDS_INVALID))\n  }\n\n  return problems\n}\n\nexport function validatePreview(preview: PreviewConfig) {\n  if (!isPlainObject(preview)) {\n    return [error(`The \"preview\" property must be an object, instead saw \"${typeof preview}\"`)]\n  }\n\n  if (typeof preview.prepare !== 'undefined' && typeof preview.prepare !== 'function') {\n    return [\n      error(\n        `The \"preview.prepare\" property must be a function, instead saw \"${typeof preview.prepare}\"`\n      ),\n    ]\n  }\n\n  if (!preview.select) {\n    return []\n  }\n\n  if (!isPlainObject(preview.select)) {\n    return [\n      error(\n        `The \"preview.select\" property must be an object, instead saw \"${typeof preview.prepare}\"`\n      ),\n    ]\n  }\n\n  return Object.keys(preview.select).reduce((errs, key) => {\n    return typeof preview.select[key] === 'string'\n      ? errs\n      : errs.concat(\n          error(\n            `The key \"${key}\" of \"preview.select\" must be a string, instead saw \"${typeof preview\n              .select[key]}\"`\n          )\n        )\n  }, [])\n}\n\nexport default (typeDef, visitorContext) => {\n  let problems = validateFields(typeDef.fields)\n\n  let preview = typeDef.preview\n  if (preview) {\n    const previewErrors = validatePreview(typeDef.preview)\n    problems = problems.concat(previewErrors)\n    preview = previewErrors.some((err) => err.severity === 'error') ? {} : preview\n  }\n\n  if (\n    typeDef.type !== 'document' &&\n    typeDef.type !== 'object' &&\n    typeof typeDef.initialValue !== 'undefined'\n  ) {\n    problems.push(\n      error(`The \"initialValue\" property is currently only supported for document & object types.`)\n    )\n  }\n\n  return {\n    ...typeDef,\n    preview,\n    fields: (Array.isArray(typeDef.fields) ? typeDef.fields : []).map((field, index) => {\n      const {name, ...fieldTypeDef} = field\n      const {_problems, ...fieldType} = visitorContext.visit(fieldTypeDef, index)\n      return {\n        name,\n        ...fieldType,\n        _problems: validateField(field, visitorContext).concat(_problems || []),\n      }\n    }),\n    _problems: problems,\n  }\n}\n","import {isPlainObject} from 'lodash'\nimport {error} from '../createValidationResult'\nimport object from './object'\n\nexport default (typeDefinition, visitorContext) => {\n  const typeDef = object(typeDefinition, visitorContext)\n  const {initialValue, initialValues} = typeDef\n\n  const hasInitialValue = typeof initialValue !== 'undefined'\n  if (hasInitialValue && !isPlainObject(initialValue) && typeof initialValue !== 'function') {\n    typeDef._problems.push(\n      error(`The \"initialValue\" property must be either a plain object or a function`)\n    )\n  }\n\n  if (typeof initialValues !== 'undefined') {\n    typeDef._problems.push(error(`Found property \"initialValues\" - did you mean \"initialValue\"?`))\n  }\n\n  return typeDef\n}\n","import {error, HELP_IDS} from '../createValidationResult'\nimport {flatten, isPlainObject} from 'lodash'\nimport {getDupes} from '../utils/getDupes'\nimport {SchemaValidationResult} from '../../typedefs'\n\nfunction normalizeToProp(typeDef) {\n  if (Array.isArray(typeDef.to)) {\n    return typeDef.to\n  }\n  return typeDef.to ? [typeDef.to] : typeDef.to\n}\n\nexport default (typeDef, visitorContext) => {\n  const isValidTo = Array.isArray(typeDef.to) || isPlainObject(typeDef.to)\n  const normalizedTo = normalizeToProp(typeDef)\n\n  const problems = flatten([\n    isValidTo\n      ? getDupes(normalizedTo, (t) => `${t.name};${t.type}`).map((dupes) =>\n          error(\n            `Found ${dupes.length} members with same type, but not unique names \"${dupes[0].type}\" in reference. This makes it impossible to tell their values apart and you should consider naming them`,\n            HELP_IDS.REFERENCE_TO_INVALID\n          )\n        )\n      : error(\n          'The reference type is missing or having an invalid value for the required \"to\" property. It should be an array of accepted types.',\n          HELP_IDS.REFERENCE_TO_INVALID\n        ),\n  ])\n\n  if (isValidTo && normalizedTo.length === 0) {\n    problems.push(\n      error(\n        'The reference type should define at least one accepted type. Please check the \"to\" property.',\n        HELP_IDS.REFERENCE_TO_INVALID\n      )\n    )\n  }\n\n  problems.push(...getOptionErrors(typeDef))\n\n  return {\n    ...typeDef,\n    to: (isValidTo ? normalizedTo : []).map(visitorContext.visit),\n    _problems: problems,\n  }\n}\n\nfunction getOptionErrors(typeDef: any): SchemaValidationResult[] {\n  const {options} = typeDef\n  const problems = [] as SchemaValidationResult[]\n\n  problems.push(\n    ...['filter', 'filterParams']\n      .filter((key) => key in typeDef)\n      .map((key) =>\n        error(\n          `\\`${key}\\` is not allowed on a reference type definition - did you mean \\`options.${key}\\`?`,\n          HELP_IDS.REFERENCE_INVALID_OPTIONS_LOCATION\n        )\n      )\n  )\n\n  if (!options) {\n    return problems\n  }\n\n  if (!isPlainObject(options)) {\n    return problems.concat(\n      error(\n        'The reference type expects `options` to be an object',\n        HELP_IDS.REFERENCE_INVALID_OPTIONS\n      )\n    )\n  }\n\n  if (typeof options.filter === 'function' && typeof options.filterParams !== 'undefined') {\n    return problems.concat(\n      error(\n        '`filterParams` cannot be used if `filter` is a function. Either statically define `filter` as a string, or return `params` from the `filter`-function.',\n        HELP_IDS.REFERENCE_INVALID_FILTER_PARAMS_COMBINATION\n      )\n    )\n  }\n\n  if (typeof options.filter === 'function' || (!options.filter && !options.filterParams)) {\n    return problems\n  }\n\n  if (typeof options.filter !== 'string') {\n    return problems.concat(\n      error(`If set, \\`filter\\` must be a string. Got ${typeof options.filter}`)\n    )\n  }\n\n  if (typeof options.filterParams !== 'undefined' && !isPlainObject(options.filterParams)) {\n    return problems.concat(error(`If set, \\`filterParams\\` must be an object.`))\n  }\n\n  if (options.filterParams) {\n    return problems.concat(\n      Object.keys(options.filterParams)\n        .filter((key) => key.startsWith('__') || key.startsWith('$'))\n        .map((key) => error(`Filter parameter cannot be prefixed with \"$\" or \"__\". Got ${key}\".`))\n    )\n  }\n\n  return problems\n}\n","import {error, HELP_IDS, warning} from '../createValidationResult'\nimport {flatten} from 'lodash'\nimport {getDupes} from '../utils/getDupes'\nimport {coreTypeNames} from '../../coreTypes'\n\nexport default (typeDef, visitorContext) => {\n  // name should already have been marked\n  const ofIsArray = Array.isArray(typeDef.of)\n\n  if (ofIsArray) {\n    const invalid = typeDef.of.reduce((errs, def, idx) => {\n      if (typeof def.name === 'string') {\n        // If an array member has been given a \"local\" type name, we want to trigger an error if the given member type name\n        // is one of the builtin types\n        //\n        // The following examples should be an error (where book is an existing root level type and reference is a built-in type):\n        //  - (…) of: [{type: 'book', name: 'image'}]\n        //  - (…) of: [{type: 'book', name: 'object'}]\n        //  - (…) of: [{type: 'object', name: 'reference'}]\n        // The following examples are valid (where \"address\" is not defined as a global object type)\n        //  - (…) of: [{type: 'object', name: 'address'}]\n        // The following examples are redundant, but should be allowed (at least for now)\n        //  - (…) of: [{type: 'object', name: 'object'}]\n        //  - (…) of: [{type: 'image', name: 'image'}]\n\n        if (\n          // specifying the same name as the type is redundant, but should not be a hard error at this point\n          // Consider showing a warning for this and deprecate this ability eventually\n          def.name !== def.type &&\n          coreTypeNames.includes(def.name)\n        ) {\n          return errs.concat(\n            error(\n              `Found array member declaration with the same type name as a built-in type (\"${def.name}\"). Array members can not be given the same name as a built-in type.`,\n              HELP_IDS.ARRAY_OF_TYPE_BUILTIN_TYPE_CONFLICT\n            )\n          )\n        }\n      }\n\n      if (def.type === 'object' && def.name && visitorContext.getType(def.name)) {\n        return errs.concat(\n          warning(\n            `Found array member declaration with the same name as the global schema type \"${def.name}\". It's recommended to use a unique name to avoid possibly incompatible data types that shares the same name.`,\n            HELP_IDS.ARRAY_OF_TYPE_GLOBAL_TYPE_CONFLICT\n          )\n        )\n      }\n      if (def.type === 'array') {\n        return errs.concat(\n          error(\n            `Found array member declaration of type \"array\" - multidimensional arrays are not currently supported by Sanity`,\n            HELP_IDS.ARRAY_OF_ARRAY\n          )\n        )\n      }\n\n      if (def) {\n        return errs\n      }\n\n      const err = `Found ${def === null ? 'null' : typeof def}, expected member declaration`\n      return errs.concat(\n        error(\n          `Found invalid type member declaration in array at index ${idx}: ${err}`,\n          HELP_IDS.ARRAY_OF_INVALID\n        )\n      )\n    }, [])\n\n    if (invalid.length > 0) {\n      return {\n        ...typeDef,\n        of: [],\n        _problems: invalid,\n      }\n    }\n  }\n\n  const problems = flatten([\n    ofIsArray\n      ? getDupes(typeDef.of, (t) => `${t.name};${t.type}`).map((dupes) =>\n          error(\n            `Found ${dupes.length} members with same type, but not unique names \"${dupes[0].type}\" in array. This makes it impossible to tell their values apart and you should consider naming them`,\n            HELP_IDS.ARRAY_OF_NOT_UNIQUE\n          )\n        )\n      : error(\n          'The array type is missing or having an invalid value for the required \"of\" property',\n          HELP_IDS.ARRAY_OF_INVALID\n        ),\n  ])\n  const of = ofIsArray ? typeDef.of : []\n\n  // Don't allow object types without a name in block arrays\n  const hasObjectTypesWithoutName = of.some(\n    (type) => type.type === 'object' && typeof type.name === 'undefined'\n  )\n  const hasBlockType = of.some((ofType) => ofType.type === 'block')\n  if (hasBlockType && hasObjectTypesWithoutName) {\n    problems.push(\n      error(\n        \"The array type's 'of' property can't have an object type without a 'name' property as member, when the 'block' type is also a member of that array.\",\n        HELP_IDS.ARRAY_OF_INVALID\n      )\n    )\n  }\n\n  return {\n    ...typeDef,\n    of: of.map(visitorContext.visit),\n    _problems: problems,\n  }\n}\n","import {warning, HELP_IDS} from '../createValidationResult'\n\nexport default (typeDef, visitorContext) => {\n  const problems = []\n\n  if (typeDef.options && typeDef.options.slugifyFn) {\n    problems.push(\n      warning(\n        'Heads up! The \"slugifyFn\" option has been renamed to \"slugify\".',\n        HELP_IDS.SLUG_SLUGIFY_FN_RENAMED\n      )\n    )\n\n    typeDef.options.slugify = typeDef.options.slugifyFn\n  }\n\n  return {\n    ...typeDef,\n    _problems: problems,\n  }\n}\n","import {error, HELP_IDS} from '../createValidationResult'\nimport {validateFields, validateField} from './object'\n\nexport default (typeDef, visitorContext) => {\n  const problems = []\n  const fields = typeDef.fields\n\n  if (fields) {\n    problems.push(...validateFields(fields, {allowEmpty: true}))\n  }\n\n  if (\n    typeDef.options &&\n    typeof typeDef.options.metadata !== 'undefined' &&\n    !Array.isArray(typeDef.options.metadata)\n  ) {\n    problems.push(\n      error(\n        `Invalid type for file \\`metadata\\` field - must be an array of strings`,\n        HELP_IDS.ASSET_METADATA_FIELD_INVALID\n      )\n    )\n  }\n\n  return {\n    ...typeDef,\n    fields: (Array.isArray(fields) ? fields : []).map((field, index) => {\n      const {name, ...fieldTypeDef} = field\n      const {_problems, ...fieldType} = visitorContext.visit(fieldTypeDef, index)\n      return {\n        name,\n        ...fieldType,\n        _problems: validateField(field, visitorContext).concat(_problems || []),\n      }\n    }),\n    _problems: problems,\n  }\n}\n","import {error, warning, HELP_IDS} from '../createValidationResult'\nimport {validateFields, validateField} from './object'\n\nconst autoMeta = ['dimensions', 'hasAlpha', 'isOpaque']\n\nexport default (typeDef, visitorContext) => {\n  const problems = []\n  const fields = typeDef.fields\n\n  if (fields) {\n    problems.push(...validateFields(fields, {allowEmpty: true}))\n  }\n\n  let options = typeDef.options\n  const metadata = options?.metadata\n  const superfluousMeta = Array.isArray(metadata)\n    ? metadata.filter((meta) => autoMeta.includes(meta))\n    : []\n\n  if (typeof metadata !== 'undefined' && !Array.isArray(metadata)) {\n    problems.push(\n      error(\n        `Invalid type for image \\`metadata\\` field - must be an array of strings`,\n        HELP_IDS.ASSET_METADATA_FIELD_INVALID\n      )\n    )\n  } else if (superfluousMeta.length > 0) {\n    problems.push(\n      warning(\n        `Image \\`metadata\\` field contains superfluous properties (they are always included): ${superfluousMeta.join(\n          ', '\n        )}`\n      )\n    )\n    options = {...options, metadata: metadata.filter((meta) => !autoMeta.includes(meta))}\n  }\n\n  return {\n    ...typeDef,\n    options,\n    fields: (Array.isArray(fields) ? fields : []).map((field, index) => {\n      const {name, ...fieldTypeDef} = field\n      const {_problems, ...fieldType} = visitorContext.visit(fieldTypeDef, index)\n      return {\n        name,\n        ...fieldType,\n        _problems: validateField(field, visitorContext).concat(_problems || []),\n      }\n    }),\n    _problems: problems,\n  }\n}\n","export function isJSONTypeOf(type, jsonType, visitorContext) {\n  if ('jsonType' in type) {\n    return type.jsonType === jsonType\n  }\n  const parentType = visitorContext.getType(type.type)\n  if (!parentType) {\n    throw new Error(`Could not resolve jsonType of ${type.name}. No parent type found`)\n  }\n  return isJSONTypeOf(parentType, jsonType, visitorContext)\n}\n","import {omit, isPlainObject} from 'lodash'\nimport humanizeList from 'humanize-list'\nimport {error, warning} from '../createValidationResult'\nimport {isJSONTypeOf} from '../utils/isJSONTypeOf'\n\nconst getTypeOf = (thing) => (Array.isArray(thing) ? 'array' : typeof thing)\nconst quote = (str) => `\"${str}\"`\nconst allowedKeys = [\n  'lists',\n  'marks',\n  'name',\n  'of',\n  'options',\n  'styles',\n  'title',\n  'type',\n  'validation',\n]\nconst allowedMarkKeys = ['decorators', 'annotations']\nconst allowedStyleKeys = ['title', 'value', 'blockEditor']\nconst allowedDecoratorKeys = ['title', 'value', 'blockEditor', 'icon']\n\nexport default function validateBlockType(typeDef, visitorContext) {\n  const problems = []\n  let styles = typeDef.styles\n  let marks = typeDef.marks\n  let members = typeDef.of\n\n  const disallowedKeys = Object.keys(typeDef).filter(\n    (key) => !allowedKeys.includes(key) && !key.startsWith('_')\n  )\n\n  if (disallowedKeys.length > 0) {\n    problems.push(\n      error(\n        `Found unknown properties for block declaration: ${humanizeList(disallowedKeys.map(quote))}`\n      )\n    )\n  }\n\n  if (marks) {\n    marks = validateMarks(typeDef.marks, visitorContext, problems)\n  }\n\n  if (styles) {\n    styles = validateStyles(styles, visitorContext, problems)\n  }\n\n  if (members) {\n    members = validateMembers(members, visitorContext, problems)\n  }\n\n  return {\n    ...omit(typeDef, disallowedKeys),\n    marks,\n    styles,\n    of: members,\n    _problems: problems,\n  }\n}\n\nfunction validateMarks(marks, visitorContext, problems) {\n  let decorators = marks.decorators\n  let annotations = marks.annotations\n\n  if (!isPlainObject(marks)) {\n    problems.push(error(`\"marks\" declaration should be an object, got ${getTypeOf(marks)}`))\n    return problems\n  }\n\n  const disallowedMarkKeys = Object.keys(marks).filter(\n    (key) => !allowedMarkKeys.includes(key) && !key.startsWith('_')\n  )\n\n  if (disallowedMarkKeys.length > 0) {\n    problems.push(\n      error(\n        `Found unknown properties for block declaration: ${humanizeList(\n          disallowedMarkKeys.map(quote)\n        )}`\n      )\n    )\n  }\n\n  if (decorators && !Array.isArray(decorators)) {\n    problems.push(\n      error(`\"marks.decorators\" declaration should be an array, got ${getTypeOf(decorators)}`)\n    )\n  } else if (decorators) {\n    decorators = validateDecorators(decorators, visitorContext, problems)\n  }\n\n  if (annotations && !Array.isArray(annotations)) {\n    problems.push(\n      error(`\"marks.annotations\" declaration should be an array, got ${getTypeOf(annotations)}`)\n    )\n  } else if (annotations) {\n    annotations = validateAnnotations(annotations, visitorContext, problems)\n  }\n\n  return {...marks, decorators, annotations}\n}\n\nfunction validateStyles(styles, visitorContext, problems) {\n  if (!Array.isArray(styles)) {\n    problems.push(error(`\"styles\" declaration should be an array, got ${getTypeOf(styles)}`))\n    return problems\n  }\n\n  styles.forEach((style, index) => {\n    if (!isPlainObject(style)) {\n      problems.push(error(`Style must be an object, got ${getTypeOf(style)}`))\n      return\n    }\n\n    const name = style.value || `#${index}`\n    const disallowedKeys = Object.keys(style).filter(\n      (key) => !allowedStyleKeys.includes(key) && !key.startsWith('_')\n    )\n\n    if (disallowedKeys.length > 0) {\n      problems.push(\n        error(\n          `Found unknown properties for style ${name}: ${humanizeList(disallowedKeys.map(quote))}`\n        )\n      )\n    }\n\n    if (!style.value) {\n      problems.push(error(`Style #${index} is missing required \"value\" property`))\n    } else if (typeof style.value !== 'string') {\n      problems.push(\n        error(\n          `Style #${index} has an invalid \"value\" property, expected string, got ${getTypeOf(\n            style.value\n          )}`\n        )\n      )\n    } else if (!style.title) {\n      problems.push(warning(`Style ${name} is missing recommended \"title\" property`))\n    }\n  })\n  return styles\n}\n\nfunction validateDecorators(decorators, visitorContext, problems) {\n  decorators.forEach((decorator, index) => {\n    if (!isPlainObject(decorator)) {\n      problems.push(error(`Annotation must be an object, got ${getTypeOf(decorator)}`))\n      return\n    }\n\n    const name = decorator.value || `#${index}`\n    const disallowedKeys = Object.keys(decorator).filter(\n      (key) => !allowedDecoratorKeys.includes(key) && !key.startsWith('_')\n    )\n\n    if (disallowedKeys.length > 0) {\n      problems.push(\n        error(\n          `Found unknown properties for decorator ${name}: ${humanizeList(\n            disallowedKeys.map(quote)\n          )}`\n        )\n      )\n    }\n\n    if (!decorator.value) {\n      problems.push(error(`Decorator #${index} is missing required \"value\" property`))\n    } else if (typeof decorator.value !== 'string') {\n      problems.push(\n        error(\n          `Decorator #${index} has an invalid \"value\" property, expected string, got ${getTypeOf(\n            decorator.value\n          )}`\n        )\n      )\n    } else if (!decorator.title) {\n      problems.push(warning(`Decorator ${name} is missing recommended \"title\" property`))\n    }\n  })\n  return decorators\n}\n\nfunction validateAnnotations(annotations, visitorContext, problems) {\n  return annotations.map((annotation) => {\n    if (!isPlainObject(annotation)) {\n      return {\n        ...annotation,\n        _problems: [error(`Annotation must be an object, got ${getTypeOf(annotation)}`)],\n      }\n    }\n\n    const {_problems} = visitorContext.visit(annotation, visitorContext)\n    const targetType = annotation.type && visitorContext.getType(annotation.type)\n    if (targetType && !isJSONTypeOf(targetType, 'object', visitorContext)) {\n      _problems.push(\n        error(\n          `Annotation cannot have type \"${annotation.type}\" - annotation types must inherit from object`\n        )\n      )\n    }\n\n    return {...annotation, _problems}\n  })\n}\n\nfunction validateMembers(members, visitorContext, problems) {\n  if (!Array.isArray(members)) {\n    problems.push(error(`\"of\" declaration should be an array, got ${getTypeOf(members)}`))\n    return undefined\n  }\n\n  return members.map((member) => {\n    const {_problems} = visitorContext.visit(member, visitorContext)\n    return {...member, _problems}\n  })\n}\n","import type {SchemaType} from '@sanity/types'\nimport type {SchemaValidationResult} from '../../typedefs'\nimport {error} from '../createValidationResult'\n\nexport function validateNonObjectFieldsProp(\n  typeDef: SchemaType,\n  visitorContext\n): SchemaValidationResult[] {\n  if (!('fields' in typeDef)) {\n    return []\n  }\n\n  let type = typeDef\n  while (type && !type.jsonType) {\n    type = visitorContext.getType(type.type)\n  }\n\n  if (type && type.jsonType !== 'object') {\n    return [error(`Type has propery \"fields\", but is not an object/document type.`)]\n  }\n\n  return []\n}\n","import leven from 'leven'\nimport humanize from 'humanize-list'\nimport {error, HELP_IDS} from '../createValidationResult'\n\nconst quote = (str) => `\"${str}\"`\n\nexport function validateTypeName(typeName: string, visitorContext) {\n  const possibleTypeNames = visitorContext.getTypeNames()\n\n  if (!typeName) {\n    return [\n      error(\n        `Type is missing a type. Valid types are: ${humanize(possibleTypeNames)}`,\n        HELP_IDS.TYPE_MISSING_TYPE\n      ),\n    ]\n  }\n\n  if (typeof typeName !== 'string') {\n    return [\n      error(\n        `Type has an invalid \"type\"-property - should be a string. Valid types are: ${humanize(\n          possibleTypeNames\n        )}`,\n        HELP_IDS.TYPE_MISSING_TYPE\n      ),\n    ]\n  }\n\n  const isValid = possibleTypeNames.includes(typeName)\n\n  if (!isValid) {\n    const suggestions = possibleTypeNames\n      .map((possibleTypeName) => {\n        return [leven(typeName, possibleTypeName), possibleTypeName]\n      })\n      .filter(([distance]) => distance < 3)\n      .map(([_, name]) => name)\n\n    const suggestion =\n      suggestions.length > 0\n        ? ` Did you mean ${humanize(suggestions.map(quote), {conjunction: 'or'})}?`\n        : ''\n\n    return [\n      error(\n        `Unknown type: ${typeName}.${suggestion}\\n\\nValid types are: ${humanize(possibleTypeNames)}`\n      ),\n    ]\n  }\n  return []\n}\n","import {validateNonObjectFieldsProp} from '../utils/validateNonObjectFieldsProp'\nimport {validateTypeName} from '../utils/validateTypeName'\n\nexport default (typeDef, visitorContext) => {\n  return {\n    ...typeDef,\n    _problems: [\n      ...validateTypeName(typeDef.type, visitorContext),\n      ...validateNonObjectFieldsProp(typeDef, visitorContext),\n    ].filter(Boolean),\n  }\n}\n","import {error, HELP_IDS, warning} from '../createValidationResult'\nimport {validateInputComponent} from '../utils/validateInputComponent'\n\nexport default (typeDef, visitorContext) => {\n  const hasName = Boolean(typeDef.name)\n  if (!hasName && Object.keys(typeDef).length === 1) {\n    // Short-circuit on obviously invalid types (only key is _problems)\n    return {\n      ...typeDef,\n      _problems: [\n        error(\n          'Invalid/undefined type declaration, check declaration or the import/export of the schema type.',\n          HELP_IDS.TYPE_INVALID\n        ),\n      ],\n    }\n  }\n\n  const problems = []\n  if (looksLikeEsmModule(typeDef)) {\n    problems.push(\n      error(\n        'Type appears to be an ES6 module imported through CommonJS require - use an import statement or access the `.default` property',\n        HELP_IDS.TYPE_IS_ESM_MODULE\n      )\n    )\n  } else if (!hasName) {\n    problems.push(error('Missing type name', HELP_IDS.TYPE_MISSING_NAME))\n  } else if (visitorContext.isReserved(typeDef.name)) {\n    problems.push(\n      error(`Invalid type name: \"${typeDef.name}\" is a reserved name.`, HELP_IDS.TYPE_NAME_RESERVED)\n    )\n  }\n\n  if (visitorContext.isDuplicate(typeDef.name)) {\n    problems.push(\n      error(\n        `Invalid type name: A type with name \"${typeDef.name}\" is already defined in the schema.`\n      )\n    )\n  }\n\n  problems.push(...validateInputComponent(typeDef))\n\n  if (!('title' in typeDef)) {\n    problems.push(\n      warning(\n        \"Type is missing title. It's recommended to always set a descriptive title.\",\n        HELP_IDS.TYPE_TITLE_RECOMMENDED\n      )\n    )\n  } else if (typeof typeDef.title !== 'string') {\n    problems.push(warning('Type title is not a string.', HELP_IDS.TYPE_TITLE_INVALID))\n  }\n  return {\n    ...typeDef,\n    _problems: problems,\n  }\n}\n\nfunction looksLikeEsmModule(typeDef) {\n  return !typeDef.name && typeDef.default && (typeDef.default.name || typeDef.default.title)\n}\n","import {isPlainObject} from 'lodash'\n\nexport const validateExperimentalSearch = (configs): string[] => {\n  if (!Array.isArray(configs)) {\n    return ['The search config of a document type must be an array of search config objects']\n  }\n  return configs\n    .map((conf) => {\n      if (!isPlainObject(conf)) {\n        return 'Search config must be an object of {path: string, weight: number}'\n      }\n      return null\n    })\n    .filter(Boolean)\n}\n","import {flatten, isPlainObject} from 'lodash'\nimport {error, HELP_IDS} from '../createValidationResult'\nimport {getDupes} from '../utils/getDupes'\nimport {SchemaValidationResult} from '../../typedefs'\nimport {validateExperimentalSearch} from '../utils/validateExperimentalSearch'\n\nfunction normalizeToProp(typeDef) {\n  if (Array.isArray(typeDef.to)) {\n    return typeDef.to\n  }\n  return typeDef.to ? [typeDef.to] : typeDef.to\n}\n\nconst VALID_DATASET = /^[a-z0-9~][-_a-z0-9]+$/\nexport function isValidDatasetName(name: string): string | true {\n  const isValid = name.length >= 2 && name.toLowerCase() === name && VALID_DATASET.test(name)\n  return (\n    isValid ||\n    `The provided dataset \"${name}\" doesn't look like a valid dataset. Dataset names must be more than 2 characters, can only contain lowercase characters, numbers, underscores and dashes and can not start with a dash or an underscore`\n  )\n}\n\nconst VALID_TOKEN_ID = /^[a-zA-Z0-9_][a-zA-Z0-9_-]+$/\nexport function isValidTokenId(tokenId: string): string | true {\n  const isValid = tokenId.length >= 2 && VALID_TOKEN_ID.test(tokenId)\n  return (\n    isValid ||\n    `The provided tokenId \"${tokenId}\" is invalid. The tokenId must be a string made up of at least 2 characters in the a-zA-Z0-9_- range and cannot start with a - (dash) character`\n  )\n}\n\nexport default (typeDef, visitorContext) => {\n  const isValidTo = Array.isArray(typeDef.to) || isPlainObject(typeDef.to)\n  const normalizedTo = normalizeToProp(typeDef)\n\n  const problems = flatten([\n    isValidTo\n      ? getDupes(normalizedTo, (t) => `${t.name};${t.type}`).map((dupes) =>\n          error(\n            `Found ${dupes.length} members with same type, but not unique names \"${dupes[0].type}\" in reference. This makes it impossible to tell their values apart and you should consider naming them`,\n            HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n          )\n        )\n      : error(\n          'The cross dataset reference type is missing or having an invalid value for the required \"to\" property. It should be an array of accepted types.',\n          HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n        ),\n  ])\n\n  if (isValidTo && normalizedTo.length === 0) {\n    problems.push(\n      error(\n        'The cross dataset reference type should define at least one referenced type. Please check the \"to\" property.',\n        HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n      )\n    )\n  }\n\n  normalizedTo.forEach((crossDatasetTypeDef, index) => {\n    if (!crossDatasetTypeDef.type) {\n      problems.push(\n        error(\n          `The referenced type at index ${index} must be named. Specify the name of the type you want to create references to.`,\n          HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n        )\n      )\n    }\n\n    if (!isPlainObject(crossDatasetTypeDef.preview)) {\n      problems.push(\n        error(\n          `Missing required preview config for the referenced type \"${\n            crossDatasetTypeDef.type || '<unknown type>'\n          }\"`,\n          HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n        )\n      )\n    }\n    validateExperimentalSearch(crossDatasetTypeDef.__experimental_search).forEach((err) => {\n      problems.push(\n        error(\n          `Invalid \"__experimental_search\" config for referenced type \"${\n            crossDatasetTypeDef.type || '<unknown type>'\n          }\": ${err}`,\n          HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n        )\n      )\n    })\n  })\n\n  if (typeof typeDef.tokenId === 'string') {\n    const validationResult = isValidTokenId(typeDef.tokenId)\n    if (validationResult !== true) {\n      problems.push(error(validationResult, HELP_IDS.CROSS_DATASET_REFERENCE_INVALID))\n    }\n  }\n\n  if (typeof typeDef.projectId !== 'string') {\n    problems.push(\n      error(\n        'A cross dataset reference must specify a `projectId`',\n        HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n      )\n    )\n  }\n  if (typeof typeDef.dataset === 'string') {\n    const datasetValidation = isValidDatasetName(typeDef.dataset)\n    if (datasetValidation !== true) {\n      problems.push(error(datasetValidation, HELP_IDS.CROSS_DATASET_REFERENCE_INVALID))\n    }\n  } else {\n    problems.push(\n      error(\n        'A cross dataset reference must specify a `dataset`',\n        HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n      )\n    )\n  }\n\n  if (typeDef.studioUrl && typeof typeDef.studioUrl !== 'function') {\n    problems.push(\n      error(\n        'The \"studioUrl\" property on a cross dataset reference must be a function taking \"{id, type}\" as argument and returning a studio url.',\n        HELP_IDS.CROSS_DATASET_REFERENCE_INVALID\n      )\n    )\n  }\n\n  problems.push(...getOptionErrors(typeDef))\n\n  return {\n    ...typeDef,\n    _problems: problems,\n  }\n}\n\nfunction getOptionErrors(typeDef: any): SchemaValidationResult[] {\n  const {options} = typeDef\n  const problems = [] as SchemaValidationResult[]\n\n  problems.push(\n    ...['filter', 'filterParams']\n      .filter((key) => key in typeDef)\n      .map((key) =>\n        error(\n          `\\`${key}\\` is not allowed on a reference type definition - did you mean \\`options.${key}\\`?`,\n          HELP_IDS.REFERENCE_INVALID_OPTIONS_LOCATION\n        )\n      )\n  )\n\n  if (!options) {\n    return problems\n  }\n\n  if (!isPlainObject(options)) {\n    return problems.concat(\n      error(\n        'The reference type expects `options` to be an object',\n        HELP_IDS.REFERENCE_INVALID_OPTIONS\n      )\n    )\n  }\n\n  if (typeof options.filter === 'function' && typeof options.filterParams !== 'undefined') {\n    return problems.concat(\n      error(\n        '`filterParams` cannot be used if `filter` is a function. Either statically define `filter` as a string, or return `params` from the `filter`-function.',\n        HELP_IDS.REFERENCE_INVALID_FILTER_PARAMS_COMBINATION\n      )\n    )\n  }\n\n  if (typeof options.filter === 'function' || (!options.filter && !options.filterParams)) {\n    return problems\n  }\n\n  if (typeof options.filter !== 'string') {\n    return problems.concat(\n      error(`If set, \\`filter\\` must be a string. Got ${typeof options.filter}`)\n    )\n  }\n\n  if (typeof options.filterParams !== 'undefined' && !isPlainObject(options.filterParams)) {\n    return problems.concat(error(`If set, \\`filterParams\\` must be an object.`))\n  }\n\n  if (options.filterParams) {\n    return problems.concat(\n      Object.keys(options.filterParams)\n        .filter((key) => key.startsWith('__') || key.startsWith('$'))\n        .map((key) => error(`Filter parameter cannot be prefixed with \"$\" or \"__\". Got ${key}\".`))\n    )\n  }\n\n  return problems\n}\n","import {traverseSanitySchema} from './traverseSchema'\nimport object from './validation/types/object'\nimport documentVisitor from './validation/types/document'\nimport reference from './validation/types/reference'\nimport array from './validation/types/array'\nimport slug from './validation/types/slug'\nimport file from './validation/types/file'\nimport image from './validation/types/image'\nimport block from './validation/types/block'\nimport common from './validation/types/common'\nimport rootType from './validation/types/rootType'\nimport crossDatasetReference from './validation/types/crossDatasetReference'\nimport {_FIXME_} from './typedefs'\n\nconst typeVisitors = {\n  array,\n  object,\n  slug,\n  file,\n  image,\n  block,\n  document: documentVisitor,\n  reference: reference,\n  crossDatasetReference: crossDatasetReference,\n}\n\nconst getNoopVisitor = (visitorContext) => (schemaDef) => ({\n  name: `<unnamed_type_@_index_${visitorContext.index}>`,\n  ...schemaDef,\n  _problems: [],\n})\n\nfunction combine(...visitors) {\n  return (schemaType, visitorContext) => {\n    return visitors.reduce(\n      (result, visitor) => {\n        const res = visitor(result, visitorContext)\n        return {\n          ...res,\n          _problems: result._problems.concat(res._problems),\n        }\n      },\n      {_problems: [], ...schemaType}\n    )\n  }\n}\n\n/**\n * @internal\n */\nexport function validateSchema(schemaTypes: _FIXME_) {\n  return traverseSanitySchema(schemaTypes, (schemaDef, visitorContext) => {\n    const typeVisitor =\n      (schemaDef && schemaDef.type && typeVisitors[schemaDef.type]) ||\n      getNoopVisitor(visitorContext)\n\n    if (visitorContext.isRoot) {\n      return combine(rootType, common, typeVisitor)(schemaDef, visitorContext)\n    }\n\n    return combine(common, typeVisitor)(schemaDef, visitorContext)\n  })\n}\n","import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SchemaType} from '@sanity/types'\nimport {difference} from 'lodash'\n\nconst ACTIONS_FLAG = '__experimental_actions'\n\nconst DEFAULT_ACTIONS = ['create', 'update', 'delete', 'publish']\nconst VALID_ACTIONS = DEFAULT_ACTIONS\n\n// todo: enable this when officially deprecating experimental actions\nconst DEPRECATE_EXPERIMENTAL_ACTIONS = false\n\nconst hasWarned = {}\nconst readActions = (schemaType: SchemaType) => {\n  if (DEPRECATE_EXPERIMENTAL_ACTIONS && !(schemaType.name in hasWarned)) {\n    console.warn(`Heads up! Experimental actions is now deprecated and replaced by Document Actions. Read more about how to migrate on ${generateHelpUrl(\n      'experimental-actions-replaced-by-document-actions'\n    )}\".\n`)\n    hasWarned[schemaType.name] = true\n  }\n\n  return ACTIONS_FLAG in schemaType ? schemaType[ACTIONS_FLAG] : DEFAULT_ACTIONS\n}\n\nconst validateActions = (typeName: string, actions: string[]) => {\n  if (!Array.isArray(actions)) {\n    throw new Error(\n      `The value of <type>.${ACTIONS_FLAG} should be an array with any of the actions ${VALID_ACTIONS.join(\n        ', '\n      )}`\n    )\n  }\n\n  const invalid = difference(actions, VALID_ACTIONS)\n\n  if (invalid.length > 0) {\n    throw new Error(\n      `Invalid action${\n        invalid.length > 1 ? 's' : ''\n      } configured for schema type \"${typeName}\": ${invalid.join(\n        ', '\n      )}. Valid actions are: ${VALID_ACTIONS.join(', ')}`\n    )\n  }\n\n  return actions\n}\n\nexport const resolveEnabledActions = (schemaType: SchemaType): string[] =>\n  validateActions(schemaType.name, readActions(schemaType))\n\nexport const isActionEnabled = (schemaType: SchemaType, action: string): boolean =>\n  resolveEnabledActions(schemaType).includes(action)\n"],"names":["normalizeToProp","getOptionErrors","quote","humanize","block"],"mappings":"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"}